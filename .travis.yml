#sudo: required
#
#services:
#  - docker
#
#script: build.sh

language: java

jdk:
  - openjdk8

sudo: required

services:
  - docker

before_install: cd $TRAVIS_BUILD_DIR/javaapp/java-api

install: true # This runs the "true" command in the install phase; thus skipping install
script:
  - |
    if git diff HEAD~ --name-only|grep javaapp; then
      docker login -u $DOCKER_USER -p $DOCKER_PASS
      mvn install dockerfile:build
      mvn  dockerfile:push
    fi;