<header *ngIf="!filter" title="Dodaj auto"></header>
<ion-header *ngIf="filter"><ion-title>Filtry</ion-title></ion-header>
<ion-content class="page_wrapper">
    <div class="addCar">
        <form class="addCar__form" [formGroup]="formGroup">
            <ion-item [class.addCar__invalid]="!formGroup.controls.brand.valid && (formGroup.controls.brand.dirty || submitAttempt)">
                <ion-label
                        stacked
                        [class.addCar__invalid]="!formGroup.controls.brand.valid && (formGroup.controls.brand.dirty || submitAttempt)"
                >
                    Marka
                </ion-label>
                <ion-input
                        [class.addCar__invalid--input]="!formGroup.controls.brand.valid && (formGroup.controls.brand.dirty || submitAttempt)"
                        formControlName="brand"
                        type="text"
                        [(ngModel)]="brand"
                        name="brand"
                ></ion-input>
            </ion-item>

            <ion-item
                    *ngIf="!filter"
                    [class.addCar__invalid]="!formGroup.controls.name.valid && (formGroup.controls.name.dirty || submitAttempt)">
                <ion-label
                        stacked
                        [class.addCar__invalid]="!formGroup.controls.name.valid && (formGroup.controls.name.dirty || submitAttempt)"
                >
                    Model
                </ion-label>
                <ion-input
                        [class.addCar__invalid--input]="!formGroup.controls.name.valid && (formGroup.controls.name.dirty || submitAttempt)"
                        formControlName="name"
                        type="text"
                        [(ngModel)]="name"
                        name="name"
                ></ion-input> <!--formControlName="name"-->
            </ion-item>

            <ion-item [class.addCar__invalid]="!formGroup.controls.category.valid && (formGroup.controls.category.dirty || submitAttempt)">
                <ion-label
                        stacked
                        [class.addCar__invalid]="!formGroup.controls.category.valid && (formGroup.controls.category.dirty || submitAttempt)"
                >
                    Kategoria
                </ion-label>
                <ion-select formControlName="category" [(ngModel)]="categoryType" name="categoryType">
                    <ion-option *ngFor="let category of adService.categories" value="{{ category }}">{{ category }}</ion-option>
                </ion-select>
            </ion-item>

            <ion-item [class.addCar__invalid]="!formGroup.controls.fuel.valid && (formGroup.controls.fuel.dirty || submitAttempt)">
                <ion-label
                        stacked
                        [class.addCar__invalid]="!formGroup.controls.fuel.valid && (formGroup.controls.fuel.dirty || submitAttempt)"
                >
                    Rodzaj paliwa
                </ion-label>
                <ion-select formControlName="fuel" [(ngModel)]="fuelType" name="fuelType">
                    <ion-option *ngFor="let fuel of engine.FUEL" value="{{fuel}}">{{ fuel }}</ion-option>
                </ion-select>
            </ion-item>

            <ion-item [class.addCar__invalid]="!formGroup.controls.power.valid && (formGroup.controls.power.dirty || submitAttempt)">
                <ion-label
                        stacked
                        [class.addCar__invalid]="!formGroup.controls.power.valid && (formGroup.controls.power.dirty || submitAttempt)"
                >
                    {{ filter ? 'Minimalna moc' : 'Moc' }}
                </ion-label>
                <ion-input
                        [class.addCar__invalid--input]="!formGroup.controls.power.valid && (formGroup.controls.power.dirty || submitAttempt)"
                        formControlName="power"
                        type="number"
                        [(ngModel)]="power"
                        name="power"
                ></ion-input>
            </ion-item>

            <ion-item [class.addCar__invalid]="!formGroup.controls.drive.valid && (formGroup.controls.drive.dirty || submitAttempt)">
                <ion-label
                        stacked
                        [class.addCar__invalid]="!formGroup.controls.drive.valid && (formGroup.controls.drive.dirty || submitAttempt)"
                >
                    Napęd
                </ion-label>
                <ion-select formControlName="drive" [(ngModel)]="driveType" name="driveType">
                    <ion-option *ngFor="let drive of engine.DRIVE" value="{{drive}}">{{ drive }}</ion-option>
                </ion-select>
            </ion-item>

            <ion-item
                    *ngIf="!filter"
                    [class.addCar__invalid]="!formGroup.controls.year.valid && (formGroup.controls.year.dirty || submitAttempt)">
                <ion-label
                        stacked
                        [class.addCar__invalid]="!formGroup.controls.year.valid && (formGroup.controls.year.dirty || submitAttempt)"
                >
                    Rok produkcji
                </ion-label>
                <ion-input
                        [class.addCar__invalid--input]="!formGroup.controls.year.valid && (formGroup.controls.year.dirty || submitAttempt)"
                        formControlName="year"
                        type="string"
                        [(ngModel)]="productionDate"
                        name="productionDate"
                ></ion-input>
            </ion-item>

            <ion-item [class.addCar__invalid]="!formGroup.controls.options.valid && (formGroup.controls.options.dirty || submitAttempt)">
                <ion-label
                        stacked
                        [class.addCar__invalid]="!formGroup.controls.options.valid && (formGroup.controls.options.dirty || submitAttempt)"
                >
                    Opcje dodatkowe
                </ion-label>
                <ion-select formControlName="options" [(ngModel)]="options" name="options" multiple="true">
                    <ion-option *ngFor="let option of option.NAMES" value="{{option}}">{{ option }}</ion-option>
                </ion-select>
            </ion-item>

            <ion-item
                    *ngIf="!filter"
                    [class.addCar__invalid]="!formGroup.controls.photo.valid && (formGroup.controls.photo.dirty || submitAttempt)">
                <ion-label
                        stacked
                        [class.addCar__invalid]="!formGroup.controls.photo.valid && (formGroup.controls.photo.dirty || submitAttempt)"
                >
                    Link do zdjęcia (XD)
                </ion-label>
                <ion-input
                        [class.addCar__invalid--input]="!formGroup.controls.photo.valid && (formGroup.controls.photo.dirty || submitAttempt)"
                        formControlName="photo"
                        type="string"
                        [(ngModel)]="photo"
                        name="photo"
                ></ion-input>
            </ion-item>

            <ion-item
                    *ngIf="!filter"
                    [class.addCar__invalid]="!formGroup.controls.price.valid && (formGroup.controls.price.dirty || submitAttempt)">
                <ion-label
                        stacked
                        [class.addCar__invalid]="!formGroup.controls.price.valid && (formGroup.controls.price.dirty || submitAttempt)"
                >
                    Cena za dzień
                </ion-label>
                <ion-input
                        [class.addCar__invalid--input]="!formGroup.controls.price.valid && (formGroup.controls.price.dirty || submitAttempt)"
                        formControlName="price"
                        type="number"
                        [(ngModel)]="pricePerDay"
                        name="pricePerDay"
                ></ion-input>
            </ion-item>


            <div *ngIf="filter">
                <ion-item
                        [class.addCar__invalid]="!formGroup.controls.price.valid && (formGroup.controls.price.dirty || submitAttempt)">
                    >
                    <ion-label
                            stacked
                            [class.addCar__invalid]="!formGroup.controls.price.valid && (formGroup.controls.price.dirty || submitAttempt)"
                    >
                        Cena max
                    </ion-label>
                    <ion-input
                            [class.addCar__invalid--input]="!formGroup.controls.price.valid && (formGroup.controls.price.dirty || submitAttempt)"
                            type="number"
                            formControlName="price"
                            name="pricePerDay"
                            [(ngModel)]="pricePerDay"
                    >
                    </ion-input>
                    <ion-range min="1" max="3000" pin="true" [(ngModel)]="pricePerDay" name="pricePerDay" formControlName="price">
                        <ion-label range-left small>1</ion-label>
                        <ion-label range-right>3000</ion-label>
                    </ion-range>
                </ion-item>
            </div>


            <button *ngIf="!filter" ion-button type="submit" block (click)="addCar()">
                {{
                    car == null
                        ? 'Dodaj auto'
                        : 'Edytuj'
                }}
            </button>
            <div *ngIf="filter" class="addCar__filterBtns">
                <button color="danger" ion-button  type="submit" block (click)="cancel()">Anuluj</button>
                <button ion-button type="submit" block (click)="doFilter()">Filtruj</button>
            </div>

        </form>
    </div>
</ion-content>
